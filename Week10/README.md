## toy-borwser
> toy-borwser 这次课程对于我来说是一次不小的挑战, 之前对于浏览器原理方面的知识了解的比较少, 通过这次学习我可以一步一步自己实现一个简易版的浏览器, 坚持下来后对自己提升还是很大的~

#### toy-borwser 解析过程
> 从一个URL请求返回HTML, 之后对HTML进行解析生成DOM树, 在通过*css*包解析HTML上的样式并且把样式附加到DOM树上, 之后处理*flex*布局对显示在浏览器上的元素, 最后通过*iamges*生成图片绘制

1. URL
2. HTML
3. DOM树
4. 带样式的DOM树
5. Layout布局
6. 绘制渲染

##### URL -> HTML
> 对于服务端的搭建, 选择的是语法熟悉的nodejs, 可以快速搭建一个服务端, 且返回想要的HTML格式数据

##### HTML -> DOM树
> HTML生成DOM树的过程, 先有个小插曲学习了实现这个过程最关键的**状态机**的使用方法, 状态机使用的是处理单个状态固定返回的下一个需要进入的状态, 这里用的函数的形式进行实现, 之后通过HTML的各种规律和许许多多的状态机, 进行对HTML的解析最终变为了一个DOM树的结构

##### DOM树 -> 带样式的DOM树
> 这里解析样式结构使用的是npm的包*css*, 从DOM树中找到对应的样式部分
```
let ast = css.parse(text) // css 包解析样式 后将样式添加到对应DOM上
```

#### 带样式的DOM树 -> Layout布局(flex)
> 根据**flex**规则, 对DOM树上的样式进行解析, 确定每个DOM树上DOM的位置, 其中flex 布局, 最主要的是两个轴, 主轴和交叉轴，根据这个轴和交叉点布局

#### Layout布局(flex) -> 绘制
> toy-borwser 绘制采用的是通过画板生成图片的绘制方式利用的是npm上的包*images*, 利用判断DOM树上是否带有样式进行绘制, 采取的是递归的方案进行遍历
```
color.match(/rgb\((\d+),(\d+),(\d+)\)/)
img.fill(Number(RegExp.$1), Number(RegExp.$2), Number(RegExp.$3)) // 找到对应的颜色进行填充
viewport.draw(img, element.style.left || 0, element.style.top || 0) // 绘制且根据left和top 分别确认 x 和 y 轴位置
viewport.save('viewprot.jpg') // 生成图片
```

#### 总结
> 这次学习 toy-borwser 对我来说收益颇多, 不仅让我了解到了浏览器的工作原理, 还学会了许多开发技巧, 状态机模式就是其中一个印象很深的方法, 本次学习代码量较多, 单纯的看视频想要理解代码的作用和巧妙之处是很难的, 我找到了一种我自己的学习方法, 先将视频里的代码段打在自己的VSCode中，在边看视频边学习, 直到一节课, 我在整体的看一遍代码进行单步调试, 有可能想要通过自己完全写出还是有一定难度的, 但是可以学习这种解决问题的方法和设计模式，并且了解浏览器的工作原理, 在以后工作中遇到问题了，就可以想到了我是不是可以通过这种设计模式解决掉这个问题, 所以整体来说这一系列课程, 难度还是挺大的， 但是坚持下来后收获确实很多. 在此感谢。

